<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Document</title>
    <style>
      body {
        padding: 20px;
      }
      #root {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <p>Search Wikipedia</p>
    <input type="text" placeholder="eg: dog, city, etc..." />
    <button type="submit">Submit</button>

    <div id="root"></div>

    <script>
      const input = document.querySelector('input[type=text]');
      const submit = document.querySelector('button[type=submit]');
      const rootElement = document.getElementById('root');

      function fetchResults(searchQuery) {
        const endpoint = `https://en.wikipedia.org/w/api.php?action=query&list=search&prop=info&inprop=url&utf8=&format=json&origin=*&srlimit=20&srsearch=${
          input.value
        }`;

        function displayResults(results) {
          console.log(results);
          rootElement.innerHTML = `<ul>${results.map(entry => `<li>${entry.snippet}</li>`)}</ul>`;
        }

        fetch(endpoint)
          .then(response => response.json())
          .then(data => {
            const results = data.query.search;
            displayResults(results);
          })
          .catch(() => console.log('Error occured'));
      }

      // function personTemplate({ name, hobbies, job }) {
      //   return `
      //     <article class="person">
      //       <h3>${name}</h3>
      //       <div>
      //           <div>Hobbies:</div>
      //           <ul>
      //               ${hobbies.map(hobby => `<li>${hobby}</li>`).join(' ')}
      //           </ul>
      //       </div>
      //       <p>Current job: ${job}</p>
      //     </article>
      //   `;
      // }

      // function handleClick() {
      //   rootElement.innerHTML = `<img src="https://source.unsplash.com/800x600/?${
      //     input.value
      //   }" alt="${input.value}">`;
      // }

      submit.addEventListener('click', fetchResults);
    </script>
  </body>
</html>

<!-- Ray White app -->
